@import "tailwindcss";
@config "../tailwind.config.ts";

/* ========================================
   MOBILE SAFETY & RESPONSIVENESS
   ======================================== */

/* Prevent horizontal overflow on mobile */
html,
body {
  overflow-x: hidden;
  max-width: 100vw;
}

/* Ensure all containers respect viewport */
* {
  max-width: 100%;
  box-sizing: border-box;
}

/* Better touch targets on mobile */
@media (max-width: 768px) {

  button,
  a,
  input,
  select,
  textarea {
    min-height: 44px;
    min-width: 44px;
  }

  /* Reduce large text on mobile */
  .text-7xl {
    font-size: 2.5rem !important;
  }

  .text-6xl {
    font-size: 2.25rem !important;
  }

  .text-5xl {
    font-size: 2rem !important;
  }

  /* Ensure fixed elements don't overflow */
  .fixed {
    max-width: 100vw;
  }
}

/* Safe area insets for notched phones */
@supports (padding: max(0px)) {
  body {
    padding-left: max(0px, env(safe-area-inset-left));
    padding-right: max(0px, env(safe-area-inset-right));
    padding-bottom: max(0px, env(safe-area-inset-bottom));
  }
}

/* ========================================
   PHYSICS WALLAH INSPIRED THEME VARIABLES
   ======================================== */

:root {
  /* PW Light Theme Variables */
  --pw-bg-page: #F8F9FC;
  --pw-bg-card: #ffffff;
  --pw-text-main: #140D52;
  --pw-text-sub: #4437B8;
  --pw-text-muted: #6B7280;
  --pw-border: #E5E7EB;

  /* Brand Constants (Don't flip, but mapped for consistency) */
  --pw-violet: #140D52;
  --pw-indigo: #4437B8;

  /* Semantic Mappings */
  --bg-primary: var(--pw-bg-page);
  --bg-secondary: #ffffff;
  --text-primary: var(--pw-text-main);
  --card-bg: var(--pw-bg-card);
}

[data-theme="dark"],
.dark {
  /* PW Dark Theme Variables */
  --pw-bg-page: #0f172a;
  /* Slate 900 */
  --pw-bg-card: #1e293b;
  /* Slate 800 */
  --pw-text-main: #f8fafc;
  /* Slate 50 */
  --pw-text-sub: #818cf8;
  /* Indigo 400 */
  --pw-text-muted: #94a3b8;
  /* Slate 400 */
  --pw-border: #334155;
  /* Slate 700 */

  /* In dark mode, 'violet' text needs to be light. 
     BUT we handle this by mapping semantic Tailwind colors to these vars, 
     not by changing the brand color logic itself indiscriminately.
     For strict text readability, we override the semantic variables. */

  --bg-primary: var(--pw-bg-page);
  --bg-secondary: #020617;
  --text-primary: var(--pw-text-main);
  --card-bg: var(--pw-bg-card);
}

/* Apply Theme Defaults */
body {
  background: var(--bg-primary);
  color: var(--text-primary);
  min-height: 100vh;
  transition: background-color 0.3s ease, color 0.3s ease;
}

/* Replaces old !important overrides with semantic class usage expectation
   or minimal targeted fixes if needed. */
.bg-white {
  background-color: var(--pw-bg-card);
}

.bg-gray-50,
.bg-gray-100 {
  background-color: var(--bg-primary);
}

.text-gray-900,
.text-gray-800 {
  color: var(--text-primary);
}

.text-gray-600,
.text-gray-500 {
  color: var(--pw-text-sub);
  /* Or muted */
}

.border-gray-100,
.border-gray-200,
.border-gray-300 {
  border-color: var(--pw-border);
}

/* Specifically target PW classes to be dynamic if they aren't already */
.text-pw-violet {
  color: var(--text-primary);
  /* Maps to Main text color (Dark Blue / White) */
}

.bg-pw-surface {
  background-color: var(--bg-primary);
}

.bg-pw-card {
  background-color: var(--card-bg);
}

/* ========================================
   ANIMATIONS
   ======================================== */

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fadeInScale {
  from {
    opacity: 0;
    transform: scale(0.95);
  }

  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes bounce-gentle {

  0%,
  100% {
    transform: translateY(0);
  }

  50% {
    transform: translateY(-5px);
  }
}

@keyframes shake {

  0%,
  100% {
    transform: translateX(0);
  }

  25% {
    transform: translateX(-5px);
  }

  75% {
    transform: translateX(5px);
  }
}

@keyframes confetti {
  0% {
    transform: translateY(0) rotate(0deg);
    opacity: 1;
  }

  100% {
    transform: translateY(-100px) rotate(720deg);
    opacity: 0;
  }
}

@keyframes pulse-glow {

  0%,
  100% {
    box-shadow: 0 0 0 0 rgba(124, 58, 237, 0.4);
  }

  50% {
    box-shadow: 0 0 0 15px rgba(124, 58, 237, 0);
  }
}

.animate-fade-in-up {
  animation: fadeInUp 0.5s ease-out;
}

.animate-fade-in-scale {
  animation: fadeInScale 0.3s ease-out;
}

.animate-bounce-gentle {
  animation: bounce-gentle 2s ease-in-out infinite;
}

.animate-shake {
  animation: shake 0.5s ease-in-out;
}

.animate-confetti {
  animation: confetti 1s ease-out forwards;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

/* Correct answer celebration */
.correct-answer {
  animation: fadeInScale 0.3s ease-out, pulse-glow 0.5s ease-out;
  background: linear-gradient(135deg, #10b981 0%, #059669 100%) !important;
}

/* Wrong answer shake */
.wrong-answer {
  animation: shake 0.5s ease-in-out;
  background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%) !important;
}


/* Custom scrollbar - PW Light */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: #EEF0F7;
}

::-webkit-scrollbar-thumb {
  background: #ABA3EC;
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: #4437B8;
}

/* Smooth scroll behavior */
html {
  scroll-behavior: smooth;
}

/* Remove spinner from number input */
input[type='number']::-webkit-outer-spin-button,
input[type='number']::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input[type='number'] {
  -moz-appearance: textfield;
  appearance: textfield;
}

/* Glassmorphism effect */
.glass {
  background: rgba(255, 255, 255, 0.25);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.18);
}

.glass-dark {
  background: rgba(30, 27, 75, 0.3);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

/* Gradient text */
.gradient-text {
  background: linear-gradient(135deg, #7c3aed 0%, #f59e0b 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* PW Theme Utilities */
.bg-pw-gradient {
  background: linear-gradient(135deg, #F8F9FC 0%, #EEF0F7 100%);
  position: relative;
}

.bg-pw-gradient::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 30vh;
  background: radial-gradient(circle at top center, rgba(68, 55, 184, 0.08) 0%, transparent 70%);
  pointer-events: none;
}

.text-pw-gradient {
  background: linear-gradient(135deg, #4437B8 0%, #140D52 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* PW Card Style - Clean White with Soft Shadow */
.pw-card {
  background: #ffffff;
  border-radius: 1rem;
  border: 1px solid #E5E7EB;
  box-shadow: 0 4px 16px rgba(20, 13, 82, 0.08);
  transition: all 0.2s ease;
}

.pw-card:hover {
  box-shadow: 0 8px 24px rgba(20, 13, 82, 0.12);
  transform: translateY(-2px);
}

/* Legacy glass-card - now styled for light theme */
.glass-card {
  background: #ffffff;
  border-radius: 1rem;
  border: 1px solid #E5E7EB;
  box-shadow: 0 4px 16px rgba(20, 13, 82, 0.08);
}

.glass-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 24px rgba(20, 13, 82, 0.12);
  transition: all 0.3s ease;
}

/* Base styles / Reset */
/* Note: Tailwind v4 handles standard element resets internally or via @layer base if needed.
   For now, keeping explicit transitions as per original globals.css */

* {
  transition-property: all;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 300ms;
}

button,
a,
input,
select,
textarea {
  transition-property: all;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 200ms;
}

button {
  font-family: inherit;
}

.shimmer {
  /* Animation defined in theme now, using generic class connection */
  animation: var(--animate-shimmer);
  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
  background-size: 1000px 100%;
}